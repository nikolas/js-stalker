<html>
	<head>

		<script>
			function proxyBlock(json) {
				var forward = 'http://example.org/stop-stalking-me!!!!';

				if ((document.URL != forward) &&
					json.proxy == 'Y'
				) {
					window.location = forward;
				}
			}

			function jsStalkerGet(json) {
				// The URL you want to forward them to
				var forward = 'http://example.org/';

				// Add stuff here to forward by IP, City, etc.
				var ip_addresses = ['127.0.0.1'];
				var cities = ['Seattle', 'Olympia'];
				var states = ['OR'];

				if (
					// If we're not at the destination
					(document.URL != forward) &&

					// and at least one of the rules matches
					(
						ip_addresses.indexOf(json.geoplugin_request) != -1 ||
						cities.indexOf(json.geoplugin_city) != -1 ||
						states.indexOf(json.geoplugin_region) != -1
					)
				) {
					// Forward the browser to the destination
					window.location = forward;
				}

				$.ajax({
					url: 'http://4gods.nl/~nik/proxyblock.php',
					type: 'GET',
					data: {
						ip: json.geoplugin_request,
						format: 'jsonp',
						cb: 'proxyBlock'
					},
					crossDomain: true,
					dataType: 'jsonp'
				});
			}
		</script>
		<script type="application/javascript" src="http://www.geoplugin.net/json.gp?jsoncallback=jsStalkerGet"></script>

	</head>
	<body>
	</body>
</html>
